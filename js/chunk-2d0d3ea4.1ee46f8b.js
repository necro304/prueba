(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d3ea4"],{"5f96":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"layout-px-spacing"},[s("div",{staticClass:"row layout-top-spacing"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"statbox widget box box-shadow"},[t._m(0),s("div",{staticClass:"widget-content widget-content-area"},[s("div",{staticClass:"row mb-4"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-3"},[s("date-picker",{attrs:{"input-class":"form-control",range:"",lang:t.lang,clearable:!1},on:{change:t.getServices},model:{value:t.range,callback:function(e){t.range=e},expression:"range"}})],1),s("div",{staticClass:"col"}),s("div",{staticClass:"col-12 col-md-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.reference,expression:"reference"}],staticClass:"form-control",attrs:{placeholder:"NÂº de guia",type:"number"},domProps:{value:t.reference},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getServices()},input:function(e){e.target.composing||(t.reference=e.target.value)}}})])])])]),s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table"},[t._m(1),s("tbody",t._l(t.services,(function(e){return s("tr",{key:e.id},[s("td",[s("div",{staticClass:"td-content product-invoice"},[t._v("#"+t._s(e.reference))])]),s("td",[s("div",{staticClass:"td-content customer-name"},[s("span",[t._v(t._s(e.firstname+" "+e.lastname))])])]),s("td",[s("div",{staticClass:"td-content"},[t._m(2,!0),s("br"),s("span",[t._v(t._s(e.date+" "+e.hour))]),e.date_estimate?s("br"):t._e(),e.date_estimate?s("span",[s("b",[t._v("Fecha de entrega:")])]):t._e(),e.date_estimate?s("br"):t._e(),e.date_estimate?s("span",[t._v(t._s(t._f("moment")(e.date_estimate,"MMMM Do YYYY, h:mm a")))]):t._e()])]),s("td",[s("div",{staticClass:"td-content"},[s("span",{class:"badge badge-"+(0==e.status?"danger":"success")},[t._v(t._s(e.estado))])])]),s("td",[s("div",{staticClass:"td-content pricing"},[s("span",{},[t._v(t._s(t._f("toCurrency")(t.calculateTotal(e))))]),e.discount_porcent>0?[s("br"),s("span",{staticClass:"badge badge-secondary"},[t._v("descuento: "+t._s(e.discount_porcent)+"%")])]:t._e()],2)]),s("td",[s("div",{staticClass:"td-content pricing"},[e.total_contra_entrega>0?s("span",{},[t._v(t._s(t._f("toCurrency")(e.total_contra_entrega)))]):t._e()])]),s("td",[s("div",{staticClass:"td-content pricing"},[e.total_contra_entrega_consignar?s("span",{},[t._v(t._s(t._f("toCurrency")(e.total_contra_entrega_consignar)))]):t._e()])]),s("td",[e.total_contra_entrega_consignar?s("div",{staticClass:"td-content "},[0==e.pay_ce?s("button",{staticClass:"btn btn-info",on:{click:function(s){return t.pagar(e.id)}}},[t._v("Pagar")]):s("span",{staticClass:"badge badge-success"},[t._v("Pagado")])]):t._e()])])})),0)])])])])])])])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"widget-header"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-12 col-md-12 col-sm-12 col-12"},[s("h4",[t._v("Contabilidad servicios")])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",{staticClass:"thead-dark"},[s("tr",[s("th",[s("div",{staticClass:"th-content"},[t._v("Referencia")])]),s("th",[s("div",{staticClass:"th-content"},[t._v("Cliente")])]),s("th",[s("div",{staticClass:"th-content"},[t._v("Fecha")])]),s("th",[s("div",{staticClass:"th-content"},[t._v("Estado")])]),s("th",[s("div",{staticClass:"th-content th-heading"},[t._v("Total")])]),s("th",[s("div",{staticClass:"th-content th-heading"},[t._v("Total contra entrega")])]),s("th",[s("div",{staticClass:"th-content th-heading"},[t._v("Total a consignar")])]),s("th",[s("div",{staticClass:"th-content th-heading"},[t._v("Pagar")])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",[s("b",[t._v("Fecha de reserva:")])])}],i=s("9ab4"),r=s("1b40"),o=s("ba8b"),c=s("ec45"),d=(s("411c"),s("4375"),s("3a36")),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.urlImg="https://todi-upload.s3.amazonaws.com/upload/avatar/",e.urlImgDboy="https://todi-upload.s3.amazonaws.com/upload/dboys/",e.services=[],e.vermas=[],e.estado=null,e.reference="",e.search_repartidor="",e.radio=null,e.mensajero=null,e.repartidoresList=[],e.serviceId=null,e.range=[],e.lang={formatLocale:{firstDayOfWeek:1},monthBeforeYear:!1},e}return Object(i["d"])(e,t),e.prototype.calculateTotal=function(t){var e=t.total*(t.discount_porcent/100);return t.total-e},e.prototype.setService=function(t){console.log(t),this.services=t.data},e.prototype.setRepartidores=function(t){console.log(t),this.repartidoresList=t.data},e.prototype.setItem=function(t){var e=t.data,s=this.services.find((function(t){return t.id==e.id}));s&&(s.pay_ce=e.pay_ce);var a=this.services.findIndex((function(t){return t.id==e.id}));void 0!=a&&a>-1&&(console.log(a),this.$set(this.services,a,s))},e.prototype.openDialog=function(t){this.serviceId=t,this.repartidoresList=[],this.mensajero=null,this.radio=null,this.$refs.modal.open()},Object.defineProperty(e.prototype,"miId",{get:function(){return this.vermas.find((function(t){return 1===t}))},enumerable:!1,configurable:!0}),e.prototype.toggleId=function(t){if(void 0==this.vermas.find((function(e){return e===t})))this.vermas.push(t);else{var e=this.vermas.findIndex((function(e){return e===t}));this.vermas.splice(e,1)}},e.prototype.formatDate=function(t){var e=new Date(t),s=""+(e.getMonth()+1),a=""+e.getDate(),n=e.getFullYear();return s.length<2&&(s="0"+s),a.length<2&&(a="0"+a),[n,s,a].join("-")},e.prototype.pagar=function(t){o["a"].get("contabilidad/servicio/"+t+"/pagar",this.setItem)},e.prototype.asignarDboy=function(){o["a"].put("services/"+this.serviceId+"/asignar/mensajero?include=users,directions,directionsCount,dboys&append=estado",{dboy:this.mensajero},this.setItem),this.$refs.modal.close()},e.prototype.getServices=function(){o["a"].get("services?filter[reference]="+this.reference+"&filter[status]="+this.estado+"&include=users,directions,directionsCount,dboys&append=estado&filter[starts_between]="+this.formatDate(this.range[0])+","+this.formatDate(this.range[1]),this.setService)},e.prototype.getRepartidoresDisponibles=function(){this.mensajero=null,o["a"].post("repartidores-disponibles",{search:this.search_repartidor,radio:this.radio,id:this.serviceId},this.setRepartidores)},e.prototype.created=function(){var t=new Date,e=2592e6,s=new Date;s.setTime(s.getTime()-e),this.range.push(s),this.range.push(t),console.log(this.formatDate(this.range[0])),this.getServices()},e=Object(i["c"])([Object(r["a"])({components:{DatePicker:c["default"],Chip:d["a"]}})],e),e}(r["c"]),u=l,p=u,v=s("2877"),h=Object(v["a"])(p,a,n,!1,null,"5f17b2ac",null);e["default"]=h.exports}}]);
//# sourceMappingURL=chunk-2d0d3ea4.1ee46f8b.js.map